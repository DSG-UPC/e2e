{
  "contractName": "Mediator",
  "abi": [],
  "metadata": "{\"compiler\":{\"version\":\"0.6.0+commit.26b70077\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"methods\":{}},\"userdoc\":{\"methods\":{}}},\"settings\":{\"compilationTarget\":{\"/D/Master_MIRI/Work/e2e/contracts/Mediator.sol\":\"Mediator\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[]},\"sources\":{\"/D/Master_MIRI/Work/e2e/contracts/DDToken.sol\":{\"keccak256\":\"0xd73f0b6ef4a69ade75318b79898cb3e617edab43abc6ea6ff4e040396001476e\",\"urls\":[\"bzz-raw://e3eed8c8ef1a1f913bbd1570f2689a2885dcc21ccf83de356b8e1602f80754a2\",\"dweb:/ipfs/QmWKrbpCemMhHX62r3wKfAtmNzF8AP9p5SduCuFg8mitiP\"]},\"/D/Master_MIRI/Work/e2e/contracts/Mediator.sol\":{\"keccak256\":\"0x99491108a089c4561d34c5566a0d931beac237db196e256646da235aab48f18c\",\"urls\":[\"bzz-raw://dba2b202b765573d216bbfd28210a7f6d701eb20adc1de41d585fa7693fd5f23\",\"dweb:/ipfs/QmYYveN69jnZC1MVo1zyFAJD5HHN46HRFX5RNoh7djV5t9\"]},\"/D/Master_MIRI/Work/e2e/node_modules/@openzeppelin/contracts/math/SafeMath.sol\":{\"keccak256\":\"0xcc78a17dd88fa5a2edc60c8489e2f405c0913b377216a5b26b35656b2d0dab52\",\"urls\":[\"bzz-raw://526dc85e1f9b9b45830e202568d267d93dde7a4fcccf4ad7798dadcd92304d3c\",\"dweb:/ipfs/QmaoXMB972J3cSDLtBq3xBo4jLwqD2uzXTwujtSPqkYVhR\"]},\"/D/Master_MIRI/Work/e2e/node_modules/@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0x5f02220344881ce43204ae4a6281145a67bc52c2bb1290a791857df3d19d78f5\",\"urls\":[\"bzz-raw://24427744bd3e6cb73c17010119af12a318289c0253a4d9acb8576c9fb3797b08\",\"dweb:/ipfs/QmTLDqpKRBuxGxRAmjgXt9AkXyACW3MtKzi7PYjm5iMfGC\"]},\"/D/Master_MIRI/Work/e2e/node_modules/@openzeppelin/contracts/token/ERC20/erc20.sol\":{\"keccak256\":\"0xca0c2396dbeb3503b51abf4248ebf77a1461edad513c01529df51850a012bee3\",\"urls\":[\"bzz-raw://991b44ff44e0496e8554a90f4c0512c28faed45104d40430019f3c67ea67740e\",\"dweb:/ipfs/Qmc3nRapVbcctELoZS5qe17zLkFB3bETBfwzCTMF1CSuGE\"]},\"/D/Master_MIRI/Work/e2e/node_modules/@openzeppelin/contracts/utils/Context.sol\":{\"keccak256\":\"0x8d3cb350f04ff49cfb10aef08d87f19dcbaecc8027b0bed12f3275cd12f38cf0\",\"urls\":[\"bzz-raw://ded47ec7c96750f9bd04bbbc84f659992d4ba901cb7b532a52cd468272cf378f\",\"dweb:/ipfs/QmfBrGtQP7rZEqEg6Wz6jh2N2Kukpj1z5v3CGWmAqrzm96\"]}},\"version\":1}",
  "bytecode": "0x6080604052348015600f57600080fd5b50603f80601d6000396000f3fe6080604052600080fdfea26469706673582212202c8ef3de10bb47298bc09d001a4a37e015513322ad6a590aee3dbec9e5b418b664736f6c63430006000033",
  "deployedBytecode": "0x6080604052600080fdfea26469706673582212202c8ef3de10bb47298bc09d001a4a37e015513322ad6a590aee3dbec9e5b418b664736f6c63430006000033",
  "sourceMap": "62:3278:1:-:0;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;62:3278:1;;;;;;;",
  "deployedSourceMap": "62:3278:1:-:0;;;;;",
  "source": "pragma solidity >=0.6.0 <0.9.0;\r\n\r\nimport \"./DDToken.sol\";\r\n\r\ncontract Mediator {\r\n/*     struct subInfo {\r\n        bool exists;\r\n        bool readyToPull;\r\n        uint limit;\r\n        uint availableTokens;\r\n    }\r\n    struct provInfo {\r\n        mapping(address => subInfo) subs;\r\n    }\r\n\r\n    address public owner;\r\n    mapping(address => provInfo) provs;\r\n    DDToken public tok;\r\n\r\n    constructor() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    receive() external payable {}\r\n\r\n    modifier onlyOwner() {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    function getAddr() public view returns (address) {\r\n        address addr = address(this);\r\n        return addr;\r\n    }\r\n\r\n    function setToken(address _tokAddress) public {\r\n        tok = DDToken(_tokAddress);\r\n    }\r\n\r\n    function addSubsToProv(\r\n        address _prov,\r\n        address _sub,\r\n        uint _limit\r\n    ) public {\r\n        require(\r\n            provs[_prov].subs[_sub].exists != true,\r\n            \"This specific subscriber-provider relationship is already established.\"\r\n        );\r\n        provs[_prov].subs[_sub].exists = true;\r\n        provs[_prov].subs[_sub].readyToPull = false;\r\n        provs[_prov].subs[_sub].limit = _limit;\r\n    }\r\n\r\n    function enableCharging(address _prov, address _sub) public {\r\n        provs[_prov].subs[_sub].readyToPull = true;\r\n    }\r\n\r\n    function disableCharging(address _prov, address _sub) public {\r\n        provs[_prov].subs[_sub].readyToPull = false;\r\n    }\r\n\r\n    function providerPullFromMed(address payable _sub, uint _amount) public {\r\n        require(\r\n            provs[msg.sender].subs[_sub].exists == true,\r\n            \"The subscriber has no agreement with the calling provider. Choose a valid subscriber to pull from.\"\r\n        );\r\n        require(\r\n            provs[msg.sender].subs[_sub].readyToPull == true,\r\n            \"The subscriber currently has an agreement with the calling provider, but the money cannot be withdrawn yet. Check again the terms of the agreement.\"\r\n        );\r\n\r\n        provs[msg.sender].subs[_sub].availableTokens -= _amount;\r\n\r\n        disableCharging(msg.sender, _sub);\r\n        tok.transfer(msg.sender, _amount);\r\n    }\r\n\r\n    function medPullFromSub(\r\n        address _prov,\r\n        address payable _sub,\r\n        uint _amount\r\n    ) public {\r\n        Subscriber auxSub = Subscriber(_sub);\r\n\r\n        provs[_prov].subs[_sub].availableTokens += _amount;\r\n\r\n        auxSub.directDebit(_prov, _amount);\r\n    }\r\n\r\n    function subPullFromMed(address _prov) public {\r\n        require(\r\n            provs[_prov].subs[msg.sender].readyToPull == false,\r\n            \"The deposited amount is already available for the Provider to withdraw. Subscriber can't get tokens back at this stage.\"\r\n        );\r\n        require(\r\n            provs[_prov].subs[msg.sender].exists == true,\r\n            \"The Subscriber-Provider agreement does not exist\"\r\n        );\r\n\r\n        uint temp = provs[_prov].subs[msg.sender].availableTokens;\r\n        provs[_prov].subs[msg.sender].availableTokens = 0;\r\n\r\n        tok.transfer(msg.sender, temp);\r\n    }\r\n\r\n    function retToSub(address _sub, address _prov) public {\r\n        uint temp = provs[_prov].subs[_sub].availableTokens;\r\n        provs[_prov].subs[_sub].availableTokens = 0;\r\n\r\n        tok.transfer(_sub, temp);\r\n    } */\r\n}\r\n",
  "sourcePath": "D:/Master_MIRI/Work/e2e/contracts/Mediator.sol",
  "ast": {
    "absolutePath": "/D/Master_MIRI/Work/e2e/contracts/Mediator.sol",
    "exportedSymbols": {
      "Mediator": [
        29
      ]
    },
    "id": 30,
    "nodeType": "SourceUnit",
    "nodes": [
      {
        "id": 27,
        "literals": [
          "solidity",
          ">=",
          "0.6",
          ".0",
          "<",
          "0.9",
          ".0"
        ],
        "nodeType": "PragmaDirective",
        "src": "0:31:1"
      },
      {
        "absolutePath": "/D/Master_MIRI/Work/e2e/contracts/DDToken.sol",
        "file": "./DDToken.sol",
        "id": 28,
        "nodeType": "ImportDirective",
        "scope": 30,
        "sourceUnit": 26,
        "src": "35:23:1",
        "symbolAliases": [],
        "unitAlias": ""
      },
      {
        "abstract": false,
        "baseContracts": [],
        "contractDependencies": [],
        "contractKind": "contract",
        "documentation": null,
        "fullyImplemented": true,
        "id": 29,
        "linearizedBaseContracts": [
          29
        ],
        "name": "Mediator",
        "nodeType": "ContractDefinition",
        "nodes": [],
        "scope": 30,
        "src": "62:3278:1"
      }
    ],
    "src": "0:3342:1"
  },
  "legacyAST": {
    "attributes": {
      "absolutePath": "/D/Master_MIRI/Work/e2e/contracts/Mediator.sol",
      "exportedSymbols": {
        "Mediator": [
          29
        ]
      }
    },
    "children": [
      {
        "attributes": {
          "literals": [
            "solidity",
            ">=",
            "0.6",
            ".0",
            "<",
            "0.9",
            ".0"
          ]
        },
        "id": 27,
        "name": "PragmaDirective",
        "src": "0:31:1"
      },
      {
        "attributes": {
          "SourceUnit": 26,
          "absolutePath": "/D/Master_MIRI/Work/e2e/contracts/DDToken.sol",
          "file": "./DDToken.sol",
          "scope": 30,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 28,
        "name": "ImportDirective",
        "src": "35:23:1"
      },
      {
        "attributes": {
          "abstract": false,
          "baseContracts": [
            null
          ],
          "contractDependencies": [
            null
          ],
          "contractKind": "contract",
          "documentation": null,
          "fullyImplemented": true,
          "linearizedBaseContracts": [
            29
          ],
          "name": "Mediator",
          "nodes": [
            null
          ],
          "scope": 30
        },
        "id": 29,
        "name": "ContractDefinition",
        "src": "62:3278:1"
      }
    ],
    "id": 30,
    "name": "SourceUnit",
    "src": "0:3342:1"
  },
  "compiler": {
    "name": "solc",
    "version": "0.6.0+commit.26b70077.Emscripten.clang"
  },
  "networks": {
    "1615474529751": {
      "events": {},
      "links": {},
      "address": "0x1439503DB961d4BaEEC1eaFF3efE18eD7CbC60ab",
      "transactionHash": "0x145f270f825becdcd22f26b60eb46466339e5e8f9b5e658001ec339074277500"
    },
    "1615543317679": {
      "events": {},
      "links": {},
      "address": "0xCe81568bA97c52F1Ce8A2A3405FFb4b207451ED2",
      "transactionHash": "0x35f4b5f27636ac30578f008f4945653b638e2f217d1e4873ed7a3c5390ea0b53"
    },
    "1615546185774": {
      "events": {},
      "links": {},
      "address": "0xB63538eC3efE427435f96Ef19F2b535bd4581Cf7",
      "transactionHash": "0x3f669d70e1db310da6693762d8bd9f497b7b2991635d70eecec0d5ec6b7a97d2"
    },
    "1615547155828": {
      "events": {},
      "links": {},
      "address": "0x543881C3796Dd63EeA57dFd47B9A2fe10d88CE75",
      "transactionHash": "0xcc5c3287be9397e44fbbb78754c7c94767de4a8c28c57beabbfd48b28fa4b4bb"
    },
    "1615551161782": {
      "events": {},
      "links": {},
      "address": "0x14F98470bA2F14b87B92e7FDA9F22F4219a63ae0",
      "transactionHash": "0x2fc76d3a402aa2bc7378578c8528fd847b67ad63b48670e308d3a269f5f8e7f7"
    },
    "1615551503793": {
      "events": {},
      "links": {},
      "address": "0xff5a3580208B9510651440D80574C953CF9c492d",
      "transactionHash": "0x11cae86b1eee266f8c14f266e894ddcc64d1698b169eb378029881b998300366"
    },
    "1615553156042": {
      "events": {},
      "links": {},
      "address": "0x35478FCb4B1da35bB428c318963Bb353cf99709B",
      "transactionHash": "0x91575dfcd244e037796f3993395177934f241520bf8082da0a36dbe8d5ed75c9"
    },
    "1615554181236": {
      "events": {},
      "links": {},
      "address": "0xD9a37625982219574B5840E383Fb8D3018e568FD",
      "transactionHash": "0xeb4602eccd8ba88a856965e88e142196473505199971c7845c1ed4d0cbce06fe"
    },
    "1615793181373": {
      "events": {},
      "links": {},
      "address": "0xEC36FcCDFF626E4D0f2E3368c54c667CA162a26b",
      "transactionHash": "0xc9fe58ee425b3d761782d3bf630a6d46169f47decd0c84c76be98193a80212df"
    },
    "1615796337090": {
      "events": {},
      "links": {},
      "address": "0xb7C53c9C263AdDFB4c6899c6cF7a10A4f2526a5B",
      "transactionHash": "0x4410e923e1c4c53227d406a0d3f1330eb4e6e0ff8a77328e4b92eea866f4afcd"
    },
    "1615797893013": {
      "events": {},
      "links": {},
      "address": "0x98b2a9ab94cE714291bD0BaBC907dd0f25bfEfC2",
      "transactionHash": "0xf22b80bb710fd3bcfb1353d8e5fc55ee130202d20c3120014cf93a46daad0417"
    },
    "1615798280988": {
      "events": {},
      "links": {},
      "address": "0x9968cc33Fe6f076E1A79b35805acAF300afE3431",
      "transactionHash": "0x66933773fcd1e2c3a4022d26f87832cbda3c445c5ae040ef10a58b6fc838d359"
    },
    "1615800049569": {
      "events": {},
      "links": {},
      "address": "0x1B7870ab6DA789fd36D7F3dE5683Eeb9B52741b6",
      "transactionHash": "0xaa9b39a4fdf1b93564739f48e1da4cce80c830f3d53e1e5ae035e25ee8a7d719"
    },
    "1615800739985": {
      "events": {},
      "links": {},
      "address": "0x9F4C80F5E0D232aE26D00f14748455Fd61bADD4b",
      "transactionHash": "0x8b240e5f9cadfd12e533263530f5dda66e4ffb7808b479e7347f0b125ddfe198"
    },
    "1615801166398": {
      "events": {},
      "links": {},
      "address": "0x2932eA93cf91a0C7dcc531BAB5b5919cf1945aed",
      "transactionHash": "0x4a235f3d9a10788c471d4d834e541033fb10edbc8d1ac56f8f3016c313f63550"
    },
    "1615801344347": {
      "events": {},
      "links": {},
      "address": "0xaba203d5852B892b19783F77DdE200454Be5cC7D",
      "transactionHash": "0x1a130a3b4c1a6102e50949aa845dfebbb35433171b2719b5b6c6f01bf2a90f93"
    },
    "1615802393836": {
      "events": {},
      "links": {},
      "address": "0x2960F65cf99589C544Ed0a8B096f24fa65d020a7",
      "transactionHash": "0xb02e0800a4c90bfa0c4de4d16d14324642d32024e0a03ade62daf7d1c2be355d"
    },
    "1615802671592": {
      "events": {},
      "links": {},
      "address": "0x68F2A9Ec0C8D90d775a165E0DE3D5d018495a6fc",
      "transactionHash": "0x87d9b0e37a7093696f9dd4cb38631a0efa5ec618a39d8754d82179cff2895d58"
    },
    "1615803047494": {
      "events": {},
      "links": {},
      "address": "0xe4a4f170F9941F4CdB1C6e8470f896F64F0b96f0",
      "transactionHash": "0xe931cfba39270862ec48dbb0a456979f49290f9e024893032fdbf7f2e7fca69e"
    },
    "1615803573965": {
      "events": {},
      "links": {},
      "address": "0xAFC275d457775c88D4De87a2e6d7C86a82aEc3e5",
      "transactionHash": "0xffa1d4c2a9f6cdaccbaf500b71d8adf091e39e1e3915f235627933dbbbdbddcd"
    },
    "1615804470637": {
      "events": {},
      "links": {},
      "address": "0x8D8a8f154E84d586d5D0793c6ba9Fc7BdF032899",
      "transactionHash": "0x90bded1186d91d214ae4ae9cdb24c64798a6089971f44d2bb1e007e70142dd25"
    },
    "1615805368496": {
      "events": {},
      "links": {},
      "address": "0xE848c843c5b3a1237FDEf02a02f7Cb1eC3B66965",
      "transactionHash": "0xc377fb4701614ea792f7659405c7f3f82abdd2b636c416b75bbe1c1b9b1f2c2f"
    },
    "1615809925259": {
      "events": {},
      "links": {},
      "address": "0xE05EBc07fc47c662Ae3cf717940cC9B7C4081BB8",
      "transactionHash": "0x926e40c9691febcb494c7eb221bed3fbf25c8d704a70d40aaed23476a72b0b8a"
    },
    "1615882493324": {
      "events": {},
      "links": {},
      "address": "0x1dA98781527601CB8C0e0DeAAc22e45D6081Bbcb",
      "transactionHash": "0x4ec0e074e692861e565ebaabdc546858dad81311c8e4e62609dc7a98eacd07a2"
    },
    "1615885033655": {
      "events": {},
      "links": {},
      "address": "0x8D05E96EC644fe23dD8FA74d7B56f773A5D4C14c",
      "transactionHash": "0x9a5a5213ff9f2f9936ea79f8d17d823d260407d9bd0051cc7f7de9c1de3dce33"
    },
    "1615969459501": {
      "events": {},
      "links": {},
      "address": "0xB726BB63E897ABdeC70213d80E144Ab47DD4A654",
      "transactionHash": "0x260e44145a7cdd8ebb61677098a87a4ef235cc6348ea9aa2bb9a25da496c3be1"
    },
    "1615971845315": {
      "events": {},
      "links": {},
      "address": "0x218Ed35AA11c72AAaD5C5dFc2dec31D57630F891",
      "transactionHash": "0x6b84ac469e10f923fcee64821b2a1d17eac2cab4d47ba8542ff7a0d8b6a12018"
    },
    "1616146813035": {
      "events": {},
      "links": {},
      "address": "0xD3587834410E4B1841CAe60c58289859E53aDA6B",
      "transactionHash": "0x8c080086145aa3879482cb18cdc1a302f9c7bc6d5afcd85a45c1e9bcd74dbcfc"
    },
    "1616153635227": {
      "events": {},
      "links": {},
      "address": "0xE183CA396E1306acB7E9F4f10CCf8bfF1B90908e",
      "transactionHash": "0xeed43d9799e4546dbad669218570e14bd5d6a6278f6d818769a4f2001a5f875c"
    },
    "1616155710774": {
      "events": {},
      "links": {},
      "address": "0x93e799E2a0BDf68Ae21FaE624e37Ab9E287d1CA0",
      "transactionHash": "0xbeec42e76abf813cf7e7bad5f753b4e381833fb3c36b9c4397a989b3d62cdf12"
    },
    "1616156384713": {
      "events": {},
      "links": {},
      "address": "0xb5F4F129b1B0c73cF2482AeA63A8E7DB416464E3",
      "transactionHash": "0x2187f9d58afebe0e17b7c5f862a087d7695916d61b5e8a512c7f766f0bfafa4e"
    },
    "1616157169109": {
      "events": {},
      "links": {},
      "address": "0x2e35A4Ea56DB342E2649a4495576C5e8b169e281",
      "transactionHash": "0xe11e4da900ced159e513f24bc373f736fa2d5f5735164376aaae5fe09a1fee1f"
    },
    "1616163448102": {
      "events": {},
      "links": {},
      "address": "0xdAecfC52068eD27aD0C93b8bD980Fee6519324d6",
      "transactionHash": "0x2f251be918cf80c2d2c564f6e2f6c07584aca5ac3cfb698ec329cf4513a23752"
    },
    "1616275495575": {
      "events": {},
      "links": {},
      "address": "0x10e11DBFF18b53dE8F8b68999865968450808e54",
      "transactionHash": "0xc554775adfab51cdf9c61099df48d9786b610903bdf87f4b5948f1e61b819993"
    },
    "1616487771914": {
      "events": {},
      "links": {},
      "address": "0x8e7Db89eE93638dcDd70EDCc857135221eF44b87",
      "transactionHash": "0x41b559d039528c83b407df7db6a7806b668aa317b84bd80065cb2436a2b9b335"
    },
    "1616570937348": {
      "events": {},
      "links": {},
      "address": "0xfB73132065B8eF2AB336350e51884cdBB30A7729",
      "transactionHash": "0xb506e9619167779a5f017d2c1cd6fb8a90e3189a8364d3856363278229a0d1c7"
    }
  },
  "schemaVersion": "3.3.4",
  "updatedAt": "2021-03-29T12:45:14.879Z",
  "devdoc": {
    "methods": {}
  },
  "userdoc": {
    "methods": {}
  }
}